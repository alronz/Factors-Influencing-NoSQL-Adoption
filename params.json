{
  "name": "Nosql-selection-factors",
  "tagline": "Investigating 4 NoSQL databases to check their data modelling capabilities and query expressiveness using the TPC-H benchmark. ",
  "body": "This project was created to show how to use NoSQL databases such as Redis, MongoDB, Neo4j and Cassandra to implement a real life data model of a B2C application and try to check how is the query expressiveness for each database.  The data model used for this experiment is the [TPCH benchmark](http://www.tpc.org/tpch/) data model shown below:\r\n\r\n\r\n\r\n![image](https://s3.amazonaws.com/b2cbucket/tpch_schema.png)\r\n\r\n\r\n\r\n\r\nTo check the query expressiveness for each database, three SQL queries have been chosen from the same benchmark (TPCH) which are shown below:\r\n\r\n##### Pricing Summary Report Query (Q1)\r\n\r\nThis query is used to report the amount of billed, shipped and returned items. The SQL query is shown below:\r\n\r\n```sql\r\nselect\r\n   l_returnflag,\r\n   l_linestatus,\r\n   sum(l_quantity) as sum_qty,\r\n   sum(l_extendedprice) as sum_base_price,\r\n   sum(l_extendedprice*(1-l_discount)) as sum_disc_price,\r\n   sum(l_extendedprice*(1-l_discount)*(1+l_tax)) as sum_charge,\r\n   avg(l_quantity) as avg_qty,\r\n   avg(l_extendedprice) as avg_price,\r\n   avg(l_discount) as avg_disc,\r\n   count(*) as count_order\r\nfrom\r\n   lineitem\r\nwhere\r\n   l_shipdate <= date '1998-12-01' - interval '[DELTA]' day (3)\r\ngroup by\r\n   l_returnflag,\r\n   l_linestatus\r\norder by\r\n   l_returnflag,\r\n   l_linestatus;\r\n```\r\n\r\nThis query was selected to show how aggregation with mathematical operations, sorting and filtering is supported in the investigated NoSQL databases.\r\n\r\n\r\n##### Shipping Priority Query (Q3)\r\n\r\nThis query is used to get the 10 unshipped orders with the highest value. In order to do that, the query joins three tables (customer, order and lineitem) as shown below:\r\n\r\n\r\n```sql\r\nselect\r\n l_orderkey,\r\n sum(l_extendedprice*(1-l_discount)) as revenue,\r\n o_orderdate,\r\n o_shippriority\r\nfrom\r\n customer,\r\n orders,\r\n lineitem\r\nwhere\r\n c_mktsegment = '[SEGMENT]'\r\n and c_custkey = o_custkey\r\n and l_orderkey = o_orderkey\r\n and o_orderdate < date '[DATE]'\r\n and l_shipdate > date '[DATE]'\r\ngroup by\r\n l_orderkey,\r\n o_orderdate,\r\n o_shippriority\r\norder by\r\n revenue desc,\r\n o_orderdate;\r\n```\r\n\r\nThis query is selected, to investigate how querying related data is supported in the investigated databases.\r\n\r\n##### Order Priority Checking Query (Q4)\r\n\r\nThis query is used to see how well the order priority system is working and gives indication of the customer satisfaction. The SQL query is shown below:\r\n\r\n```sql\r\nselect\r\n o_orderpriority,\r\n count(*) as order_count\r\nfrom\r\n orders\r\nwhere\r\n o_orderdate >= date '[DATE]'\r\n and o_orderdate < date '[DATE]' + interval '3' month\r\n and exists (\r\nselect\r\n *\r\nfrom\r\n lineitem\r\nwhere\r\n l_orderkey = o_orderkey\r\n and l_commitdate < l_receiptdate\r\n)\r\ngroup by\r\n o_orderpriority\r\norder by\r\n o_orderpriority;\r\n```\r\n\r\nThis query is chosen, to check how subqueries are supported in the investigated databases.\r\n\r\n##### Project structure\r\n\r\nThis project was created as separate projects for each database where each project can be run alone as a service and each query is built like an API that can be called to test the code. For example for the Cassandra database, you can find the project under \"Cassandra/CassandraTPCHQueries/\" and for MongoDB the project is under the path \"MongoDB/TPCHQueries/\" and so forth.\r\n\r\n##### Usage\r\n\r\nThe data used as input for the projects of each database is a small set from the data generated using TPCH DBGEN tool. The data is stored in CSV files that correspond to each object in the TPCH benchmark schema shown above (customer, supplier, part, lineitem, order , etc ...). For more details about how to generate the data, please have a look at [this](http://kejser.org/tpc-h-data-and-query-generation/) blog post.  You can change the used input data by changing the content of the input files that are located under the \"data\" folder. For example, the input files for Cassandra are located in the path (Cassandra/CassandraTPCHQueries/src/main/java/org/cassandra/tpcH/data).\r\n\r\n\r\nTo test the projects, you can use run the individual projects for each database and use swagger UI to call the APIs for each query. For example, you can run the (Cassandra/CassandraTPCHQueries/) project by running the following:\r\n\r\n````\r\ngradle run\r\n````\r\n\r\n\r\nThen you can find the swagger ui in the following path:\r\n\r\n\r\n````\r\nhttp://localhost:{port}/api/swagger\r\n````\r\n\r\n\r\n##### Documentation\r\n\r\n\r\nFor each database example project, I have created a detailed explanation of the project that can be found in the documentation for the each database under the example folder.  For example, Cassandra project \"Cassandra/CassandraTPCHQueries/\" documentation can be found in the path (Cassandra/Examples/tpch.md).\r\n\r\nBeside the explanation for the projects, you can find brief documentation for most  of the features in each database folder.\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}